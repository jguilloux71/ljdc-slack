#!/bin/bash




#------------------------------------------------------------------------------
readonly realpath=$(realpath "$0")
readonly dirpath=$(dirname "$realpath")
#------------------------------------------------------------------------------




#------------------------------------------------------------------------------
title() {
	msg="$1"
	len=${#msg}
	echo -e "\n\n${msg}"
	printf '=%.0s' $(seq 1 $len)
	echo
}
#------------------------------------------------------------------------------




#------------------------------------------------------------------------------
coverage_run() {
	for test_file in ${dirpath}/test_*.py
	do
		title "${test_file}"
		coverage run -a "$test_file" -b -v || exit 1
	done
}
#------------------------------------------------------------------------------




#------------------------------------------------------------------------------
coverage erase || exit 1
coverage_run || exit 1
coverage html || exit 1

exit 0
#------------------------------------------------------------------------------